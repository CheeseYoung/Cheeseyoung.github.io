<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>[데이터베이스] 17. 장애와 회복기법 | 매일 기록하는 코딩 공부 일지</title>
<meta name="generator" content="Jekyll v4.4.1">
<meta property="og:title" content="[데이터베이스] 17. 장애와 회복기법">
<meta name="author" content="Jo">
<meta property="og:locale" content="en_US">
<meta name="description" content="목차 🕳 DBMS / RDBMS / SQL / NoSQL 🕳 레디스(Redis) 🕳 DB Lock 🕳 클러스터링 vs 리플리케이션(Clustering vs Replication) 📌 장애와 회복기법 🕳 SQL의 종류 (DDL, DML, DCL, TCL)">
<meta property="og:description" content="목차 🕳 DBMS / RDBMS / SQL / NoSQL 🕳 레디스(Redis) 🕳 DB Lock 🕳 클러스터링 vs 리플리케이션(Clustering vs Replication) 📌 장애와 회복기법 🕳 SQL의 종류 (DDL, DML, DCL, TCL)">
<link rel="canonical" href="https://cheeseyoung.github.io//jekyll-theme-yat/cs/2024/03/21/as89.html">
<meta property="og:url" content="https://cheeseyoung.github.io//jekyll-theme-yat/cs/2024/03/21/as89.html">
<meta property="og:site_name" content="매일 기록하는 코딩 공부 일지">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2024-03-21T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="[데이터베이스] 17. 장애와 회복기법">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jo"},"dateModified":"2024-03-21T00:00:00+00:00","datePublished":"2024-03-21T00:00:00+00:00","description":"목차 🕳 DBMS / RDBMS / SQL / NoSQL 🕳 레디스(Redis) 🕳 DB Lock 🕳 클러스터링 vs 리플리케이션(Clustering vs Replication) 📌 장애와 회복기법 🕳 SQL의 종류 (DDL, DML, DCL, TCL)","headline":"[데이터베이스] 17. 장애와 회복기법","mainEntityOfPage":{"@type":"WebPage","@id":"https://cheeseyoung.github.io//jekyll-theme-yat/cs/2024/03/21/as89.html"},"url":"https://cheeseyoung.github.io//jekyll-theme-yat/cs/2024/03/21/as89.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="icon" href="%F0%9F%90%B1">
  <link rel="canonical" href="https://cheeseyoung.github.io/">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/jekyll-theme-yat/assets/css/main.css">
  <script src="/jekyll-theme-yat/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="https://cheeseyoung.github.io//jekyll-theme-yat/feed.xml" title="매일 기록하는 코딩 공부 일지">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js" async></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/umd/photoswipe-lightbox.umd.min.js" async></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/umd/photoswipe.umd.min.js" async></script>
<link href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/photoswipe.min.css" rel="stylesheet">
<style>
  .pswp .pswp__container .pswp__img {
    background-color: white;
  }
</style>

<script>
  function initPhotoSwipe() {
    let customOptions = {};

    try {
      const data = ``.replaceAll("=>", ":");
      customOptions = JSON.parse(data);
    } catch (e) {
      console.info("Invalid custom photo previewer options! " + e.message);
    }

    // Define object and gallery options
    const options = Object.assign(
      {
        gallery: "section.main",
        children: "a.photo-swipe",
        photo_scale: 2,
        // dynamic import is not supported in UMD version
        pswpModule: PhotoSwipe,
      },
      customOptions
    );

    const galleryEl = document.querySelector(options.gallery);
    if (!galleryEl) {
      return;
    }

    const imgEls = [];
    const els = galleryEl.querySelectorAll("img:not(.emoji)");
    els.forEach((el) => {
      if (el.src.trim() == "") {
        return;
      }
      if (!imgEls.includes(el)) {
        imgEls.push(el);
      }
    });

    if (imgEls.length === 0) {
      return;
    }

    imgEls.forEach((imgEl) => {
      imgEl.outerHTML = `
      <a class="photo-swipe"
        href="${imgEl.src}"
        data-pswp-width="${
          Math.max(imgEl.naturalWidth, imgEl.width) * options.photo_scale
        }"
        data-pswp-height="${
          Math.max(imgEl.naturalHeight, imgEl.height) * options.photo_scale
        }"
        data-pswp-caption="${imgEl.getAttribute("caption") || imgEl.alt}"
        target="_blank">
        ${imgEl.outerHTML}
      </a>`;
    });

    // Initialize PhotoSwipe 5
    var lightbox = new PhotoSwipeLightbox(options);

    lightbox.init();
  }

  window.addEventListener("load", initPhotoSwipe);
</script>
</head>
<body>





































































































































<header class="site-header site-header-transparent" role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/jekyll-theme-yat/">
  <img class="site-favicon" title="매일 기록하는 코딩 공부 일지" src="%F0%9F%90%B1" onerror="this.style.display='none'">
  매일 기록하는 코딩 공부 일지
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/jekyll-theme-yat/about.html">ABOUT</a><a class="page-link" href="/jekyll-theme-yat/archives.html">ARCHIVES</a><a class="page-link" href="/jekyll-theme-yat/categories.html">CATEGORIES</a><a class="page-link" href="/jekyll-theme-yat/">HOME</a><a class="page-link" href="/jekyll-theme-yat/tags.html">TAGS</a>









<span class="page-link">



<div id="google_translate_element" style="display: none;">
</div>

<span class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="fr">
          
          <img src="https://cdn.countryflags.com/thumbs/france/flag-400.png" title="French">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="zh-CN">
          
          <img src="https://cdn.countryflags.com/thumbs/china/flag-400.png" title="Chinese(Simple)">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ja">
          
          <img src="https://cdn.countryflags.com/thumbs/japan/flag-400.png" title="Japanese">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ko">
          
          <img src="https://cdn.countryflags.com/thumbs/south-korea/flag-400.png" title="Korean">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ru">
          
          <img src="https://cdn.countryflags.com/thumbs/russia/flag-400.png" title="Russian">
          
        </a>
      </li>
    
  </ul>
</span>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  // Links to cross-origin destinations are unsafe
  var gll = document.getElementsByClassName('goog-logo-link')[0];
  if (gll) {
    gll.setAttribute('rel', 'noopener');
  }

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" async></script>
</span>
</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;documentElement.setAttribute("data-header-transparent", "");var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>


























































































































































<style>
    html .page-banner {
      background: #000;
    }
  </style>
<style>html .page-banner {
      height:  36.8vh;
      min-height: 38vh;
    }
    html[data-scroll-status="top"] .page-banner {
      height: 100vh;
    }
  </style>
<style>
    html .page-banner .page-banner-img > *:first-child {
      opacity: 0.618;
    }

    html[data-theme="dark"] .page-banner .page-banner-img > *:first-child {
      opacity: 0.443724;
    }
  </style>
<style>
    html .page-banner .page-banner-inner > *:first-child > *:nth-child(1) {
      font-size: 3em; font-weight: bold;
    }
  </style>
<style>
    html .page-banner .page-banner-inner > *:first-child > *:nth-child(2) {
      color: gold
    }
  </style>
<section class="page-banner">
    <div class="page-banner-img">
<div style="background-image: url(https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/aeac5cfa-eba8-4151-9407-183825690fdd)"></div>
        <img class="img-placeholder" src="https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/aeac5cfa-eba8-4151-9407-183825690fdd">
</div>
    <div class="wrapper">
      <div class="page-banner-inner">
<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">[데이터베이스] 17. 장애와 회복기법</h1>
  <h2 class="post-subtitle">Engineer Information Processing</h2>

  <div class="post-meta">
    <time class="dt-published" datetime="2024-03-21T00:00:00+00:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Mar 21, 2024
    </time><span class="post-author left-vsplit"><i class="fa fa-pencil"></i> Jo</span>
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 5 mins</span>
  </div>
<div class="post-tags"><a class="post-tag" href="/jekyll-theme-yat/tags.html#Study">#Study</a></div></header>
</div>
    </div>
  </section><script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<div id="click-to-top" class="click-to-top">
  <i class="fa fa-arrow-up"></i>
</div>
<script>
  (function () {
    const clickToTop = document.getElementById('click-to-top');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        clickToTop.classList.add('show')
      }else {
        clickToTop.classList.remove('show')
      }
    });
    clickToTop.addEventListener('click', () => {
      window.smoothScrollTo(0);
    });
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <h1 id="목차">목차</h1>
<p>🕳 DBMS / RDBMS / SQL / NoSQL <br>
🕳 레디스(Redis) <br>
🕳 DB Lock <br>
🕳 클러스터링 vs 리플리케이션(Clustering vs Replication) <br>
📌 장애와 회복기법 <br>
🕳 SQL의 종류 (DDL, DML, DCL, TCL) <br>
<br></p>
<hr>

<h2 id="장애">장애</h2>
<h1 id="트랜잭션을-더이상-수행할-수-없는-시스템-중단-상태">트랜잭션을 더이상 수행할 수 없는 시스템 중단 상태</h1>
<ul>
  <li>데이터베이스에 장애가 발생해도 DBMS의 회복 기능을 통해 데이터베이스는 정확하고 일관된 상태로 유지할 수 있다</li>
  <li>장애가 발생하는 원인은 정전, 사용자의 실수, 하드웨어 고장, 소프트웨어 오류, 미디어 장치 고장, 트랜잭션 논리적 오류 등 다양하다.
    <h3 id="장애의-유형">장애의 유형</h3>
    <ul>
      <li>실행 장애 : 데이터베이스 연산 실패</li>
      <li>트랜잭션 장애 : 프로그램 실행 중지</li>
      <li>시스템 장애 : 하드웨어 결함</li>
      <li>미디어 장애 : 디스크 장치 결함</li>
    </ul>
  </li>
</ul>

<h2 id="데이터베이스-저장-연산">데이터베이스 저장 연산</h2>
<ul>
  <li>데이터베이스는 비휘발성 저장 장치인 디스크에 저장되어 있다.</li>
  <li>응용 프로그램에서 트랜잭션 수행을 지시하면 디스크에서 메인 메모리로 데이터를 보내고 데이터를 다시 디스크로 보내는 작업이 필요하다.</li>
  <li>디스크와 메인 메모리 간의 데이터 이동은 블록(block) 단위로 이동하며</li>
  <li>
    <p>디스크에 있는 블록을 디스크 블록, 메인 메모리에 있는 블록을 버퍼 블록이라 한다.</p>
  </li>
  <li>디스크와 메모리 간의 데이터 이동은 다음 두 연산으로 수행된다.
    <ul>
      <li>input(X) : 디스크 블록에 저장되어 있는 데이터 X를 메인 메모리 버퍼 블록으로 이동시키는 연산</li>
      <li>output(X) : 메인 메모리 버퍼 블록에 있는 데이터 X를 디스크 블록으로 이동시키는 연산</li>
    </ul>
  </li>
  <li>메인 메모리의 버퍼 블록과 프로그램 변수 간의 데이터 이동은 다음 두 연산으로 수행된다.
    <ul>
      <li>read(X) : 메인 메모리 버퍼 블록에 저장되어 있는 데이터 X를 프로그램의 변수로 읽어오는 연산</li>
      <li>write(X) : 프로그램 변수 값을 메인 메모리 버퍼 블록에 있는 데이터 X에 기록하는 연산</li>
    </ul>
  </li>
  <li>응용 프로그램에서 트랜잭션 수행을 지시하면 read(X) 연산으로 처리할 데이터를 가져온다.</li>
  <li>이때 디스크에 저장된 데이터를 메인 메모리 버퍼 블록으로 가져와야하므로 내부적으로 input(X) 연산이 실행된다.</li>
  <li>read(X) 연산이 실행되어 데이터가 프로그램 변수에 저장되면 트랜잭션의 모든 연산은 프로그램 변수를 대상으로 처리된다.</li>
  <li>그 후 write(X) 연산이 실행 된 후 output(X) 연산이 실행되어 결과 값이 디스크에 있는 데이터베이스로 전달된다.
<img src="https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/aeac5cfa-eba8-4151-9407-183825690fdd" alt="image">
</li>
</ul>

<blockquote>
  <p>input과 output이 메인메모리 기준이다. read하려면 input, write하려면 output</p>
</blockquote>

<p>트랜잭션에 데이터 이동 연산을 추가해 표현하면 아래와 같이 표현된다.</p>

<p><img src="https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/5c8c0e19-de3d-4e35-820f-5404a0f2e7c8" alt="image"></p>

<h2 id="회복">회복</h2>
<h1 id="장애로-인해-제대로-실행되지-못한-db를-이전-상태로-복구하는-작업">장애로 인해 제대로 실행되지 못한 DB를 이전 상태로 복구하는 작업</h1>
<ul>
  <li>회복 작업을 위해서는 덤프와 로그가 있어야만 가능하다.</li>
  <li>장애 발생 시, 가장 최근의 복사본(덤프)을 가져온 후 로그를 보며 복구한다.</li>
  <li>
<strong>복사본에는 반영되지 않았지만, 로그상으로 완료된 트랜잭션은 재실행</strong>해서 DB에 반영한다.(Redo)</li>
  <li>반면 <strong>복사본에 장애 발생 후 진행중이던 트랜잭션이 있다면, 반대로 로그를 보며 취소</strong> 작업을 실시한다. (Undo)</li>
</ul>

<h3 id="관련-키워드">관련 키워드</h3>
<ul>
  <li>덤프(Dump) : 주기적으로 데이터베이스 전체를 다른 저장 장치에 복제하는 것</li>
  <li>로그(Log) : 데이터베이스가 변경될 때마다 예전 값과 변경 값을 기록해두는 것</li>
  <li>재실행(Redo) : 장애 발생 전, 이미 완료된 트랜잭션을 재실행</li>
  <li>취소(Undo) : 장애 발생 후, 진행중이던 트랜잭션을 취소하고 이전 상태로 복구</li>
</ul>

<h3 id="로그-레코드">로그 레코드</h3>
<ul>
  <li>로그는 데이터의 변경 기록만을 별도의 파일에다 저장하는 방법이다.</li>
  <li>트랜잭션이 수행되면서 로그 파일에 로그 레코드가 기록된다.</li>
  <li>로그 레코드는 아래의 네 종류로 구분된다.
<img src="https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/fbb807e6-befe-4bd2-9869-b5fc904e7737" alt="image">
</li>
  <li>트랜잭션 수행 도중 아래와 같이 로그파일에 로그레코드가 기록된다.
<img src="https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/d682da2b-02a3-4aaf-aab4-c25becc979af" alt="image">
</li>
</ul>

<h3 id="회복-작업에서의-트랜잭션-원자성과-영속성">회복 작업에서의 트랜잭션 (원자성과 영속성)</h3>
<p><img src="https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/e0151fee-a59c-488f-af8f-39aa2605c311" alt="image"></p>
<ul>
  <li>장애 발생 시점을 기준으로 트랜잭션 완료 여부에 따라 Redo와 Undo로 나누어진다.</li>
  <li>
<strong>Redo를 하는 이유는 트랜잭션의 영속성을 만족하기 위해서</strong>다.</li>
  <li>트랜잭션은 일단 완료되면 그 결과를 영구 기억장치에 저장하고 보존해야한다.</li>
  <li>이를 위해 다시 Redo 작업을 실시해서 저장한다.</li>
  <li>반면 <strong>Undo를 하는 이유는 트랜잭션의 원자성을 만족하기 위해서</strong>다.</li>
  <li>트랜잭션은 전부 실행되거나, 아예 실행되지 않아야한다.</li>
  <li>장애로 인해 중간 결과만 남은 경우, 다시 실행 이전으로 복구해야한다.</li>
</ul>

<h2 id="데이터베이스-회복-기법">데이터베이스 회복 기법</h2>
<ul>
  <li>데이터베이스 회복 기법은 로그 회복 기법, 검사 시점 회복 기법, 미디어 회복 기법 등이 있다.</li>
  <li>그 중 <code class="language-plaintext highlighter-rouge">로그 회복 기법</code>을 일반적으로 사용한다.</li>
  <li>회복 연산인 redo와 undo는 회복 기법에서 주요 연산으로 사용된다.</li>
</ul>

<h3 id="로그-회복-기법-종류">로그 회복 기법 종류</h3>
<p>로그 회복 기법은 트랜잭션의 데이터 변경 연산 결과를 <strong>언제 데이터베이스에 반영하는지에 따라 즉시 갱신 기법과 지연 갱신 기법</strong>으로 나뉜다.</p>
<h4 id="즉시-갱신-회복-기법">즉시 갱신 회복 기법</h4>
<ul>
  <li>트랜잭션 수행 중 데이터 변경 연산 결과를 <strong>데이터베이스에 즉시 반영</strong>한다.</li>
  <li>트랜잭션에서 데이터 변경 연산이 실행되면 로그 파일에 로그 레코드를 먼저 기록한 후 데이터베이스에 변경 연산 결과를 반영한다.</li>
  <li>즉시 갱신 회복 기법은 장애가 발생하면 아래의 기준에 따라 트랜잭션에 undo 연산 또는 redo 연산을 실행한다.
<img src="https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/3643598d-6e61-4503-923f-621424793efd" alt="image">
</li>
  <li>undo 연산을 실행할 트랜잭션이 여러 개인 경우 로그에 기록된 순서의 반대로 undo 연산이 실행되며</li>
  <li>redo 연산을 실행할 트랜잭션이 여러 개인 경우 로그 기록 순서대로 redo 연산이 실행된다.</li>
</ul>

<blockquote>
  <p>덤프와 장애 사이에서 완료된 트랜잭션은 redo, 실행 중에 장애가 발생한 트랜잭션은 undo</p>
</blockquote>

<h4 id="자연-갱신-회복-기법">자연 갱신 회복 기법</h4>
<p><img src="https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/dfd296c7-5026-42b8-89a0-2b5810fb0fbb" alt="image"></p>
<ul>
  <li>트랜잭션이 수행 중 데이터 변경 연산 결과를 <strong>로그 파일에만 기록해두었다가 commit 이후에만 데이터베이스 반영</strong>한다.</li>
  <li>따라서 장애 발생 시
    <ul>
      <li>아직 완료가 되지 않은 트랜잭션에 undo 연산을 할 필요없이</li>
      <li>로그에 기록된 내용을 버리기만 하면 되므로 redo 연산만 사용</li>
    </ul>
  </li>
  <li>또한 undo 연산을 하지 않아 <em>로그 레코드에 이전 값을 기록할 필요가 없</em>으므로 변경 연산에 대한 로그 레코드는 &lt;Ti,X,newValue&gt; 형식으로 기록된다.</li>
  <li>지연 갱신 회복 기법은 장애가 발생하면 아래의 기준에 따라 트랜잭션에 redo 연산을 수행한다.
<img src="https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/9bce4152-4d62-4618-8b81-9fe5f47a0e17" alt="image">
</li>
</ul>

<h4 id="검사-시점-회복-기법">검사 시점 회복 기법</h4>
<ul>
  <li>로그 파일 전체를 보고 redo 연산과 undo 연산을 수행하면 회복 시간이 너무 오래 걸린다.</li>
  <li>따라서 회복에 사용될 로그 기록의 범위를 정할 필요가 있다.
검사 시점 회복 기법은 로그 회복 기법을 이용하되
일정 시간 간격으로 검사 시점(checkpoint)를 만들고
검사 시점 이전의 로그는 회복에 이용되지 않음으로써 회복 시간을 단축시킨다.</li>
</ul>

<h4 id="미디어-회복-기법">미디어 회복 기법</h4>
<ul>
  <li>데이터베이스가 저장되어 있는 비휘발성 메모리에 장애가 발생할 경우 미디어 회복 기법을 사용한다.</li>
  <li>미디어 회복 기법은 데이터베이스의 복사본인 덤프 파일을 사용해 데이터베이스를 복구한 후
필요에 따라 로그 파일을 토대로 redo 연산을 실행한다.</li>
</ul>



    </div>

</article>
<div class="post-nav">
<a class="previous" href="/jekyll-theme-yat/cs/2024/03/20/as88.html" title="[데이터베이스] 16. 클러스터링 vs 리플리케이션">[데이터베이스] 16. 클러스터링 vs 리플리케이션</a><a class="next" href="/jekyll-theme-yat/cs/2024/03/21/as90.html" title="[데이터베이스] 18. SQL의 종류 (DDL, DML, DCL, TCL)">[데이터베이스] 18. SQL의 종류 (DDL, DML,...</a>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li class="">
          <a class="post-link" href="/jekyll-theme-yat/cs/2024/02/26/as14.html" title="[개발상식] 14. 오버로딩과 오버라이딩(Overloading &amp; Overriding)">
            [개발상식] 14. 오버로딩과 오버라이딩(Overloading &amp; Overriding)<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li>
<li class="">
          <a class="post-link" href="/jekyll-theme-yat/cs/2024/03/11/as47.html" title="[네트워크] 17. HTTP 상태코드(HTTP Status Code)">
            [네트워크] 17. HTTP 상태코드(HTTP Status Code)<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li>
<li class="">
          <a class="post-link" href="/jekyll-theme-yat/cs/2024/03/06/as38.html" title="[네트워크] 8. 공개키 암호 &amp; 대칭키 암호">
            [네트워크] 8. 공개키 암호 &amp; 대칭키 암호<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li>
<li class="">
          <a class="post-link" href="/jekyll-theme-yat/linux/2024/07/24/linux05.html" title="[리눅스] 5. 리눅스 IPC 메커니즘과 기본 제어">
            [리눅스] 5. 리눅스 IPC 메커니즘과 기본 제어<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/jekyll-theme-yat/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div>Unpublished Work <span class="copyleft">©</span> 2017-2025 {YoungEun Jo}</div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="https://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/jekyll-theme-yat/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
