---
layout: post
title: \[ê°œë°œìƒì‹] \[ìš´ì˜ì²´ì œ] 6. ë™ê¸°í™” ë¬¸ì œ(synchronization problem)
subtitle: Engineer Information Processing
author: Jo
categories: STUDY
banner:
  image: https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/7d1486cb-8872-4069-a55d-e77c84697863
  opacity: 0.618
  background: "#000"
  height: "100vh"
  min_height: "38vh"
  heading_style: "font-size: 4.25em; font-weight: bold; text-decoration: underline"
  subheading_style: "color: gold"
tags: Study

---

# ëª©ì°¨
ğŸ•³ ìš´ì˜ì²´ì œë€? <br>
ğŸ•³ ì»´í“¨í„° ì‹œìŠ¤í…œì˜ êµ¬ì¡° <br>
ğŸ•³ ë°”ì´íŠ¸ ì˜¤ë”(Byte Order) <br>
ğŸ•³ í”„ë¡œì„¸ìŠ¤ì™€ ìŠ¤ë ˆë“œ(Process & Thread) <br>
ğŸ•³ ë©€í‹°í”„ë¡œì„¸ìŠ¤ì™€ ë©€í‹°ìŠ¤ë ˆë“œ(Multi Process & Multi Thread) <br>
ğŸ“Œ ë™ê¸°í™” ë¬¸ì œ(synchronization problem) <br>
ğŸ•³ í”„ë¡œì„¸ìŠ¤ ì œì–´ ë¸”ë¡ê³¼ ë¬¸ë§¥êµí™˜(Process Control Block & Context Switching) <br>
<br>
<hr>


## ë™ê¸°í™” (Synchronization)
ë©€í‹°ìŠ¤ë ˆë“œ, ë©€í‹° í”„ë¡œê·¸ë˜ë° í™˜ê²½ì—ì„œ ì¼ì–´ë‚˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•
- ë‘ ê°œ ì´ìƒì˜ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ê³µìœ  ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•˜ë ¤ëŠ” ê²½ìš° race conditionì´ ë°œìƒ
- ì´ ê²½ìš°ì— ìŠ¤ë ˆë“œë“¤ì˜ ì‹¤í–‰ ìˆœì„œë¥¼ ì¡°ì ˆí•˜ê¸° ìœ„í•´ ë™ê¸°í™”ê°€ í•„ìš”í•˜ë‹¤.
![image](https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/f72f301b-68ea-4c8a-b1ef-fb2a2c1339b5)

## Race Condition
![image](https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/7d1486cb-8872-4069-a55d-e77c84697863)
ë‘ ê°œ ì´ìƒì˜ ìŠ¤ë ˆë“œë“¤ì´ shared memoryì— ì ‘ê·¼í•˜ë ¤ê³  í•  ë•Œ ë™ê¸°í™” ë§¤ì»¤ë‹ˆì¦˜ ì—†ì´ ì ‘ê·¼í•˜ë ¤ê³  í•˜ëŠ” ìƒí™©ì„ Race Conditionì´ë¼ê³  í•œë‹¤.
  - ë‘ ê°œì˜ ìŠ¤ë ˆë“œë“¤ì´ í•˜ë‚˜ì˜ ìì›ì„ ë†“ê³  ê²½ìŸí•˜ê¸° ë•Œë¬¸ì— ì €ë ‡ê²Œ ë¶€ë¦„
- í•­ìƒ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ê±´ ì•„ë‹ˆê³ , ì½”ë“œ ì‹¤í–‰ì¤‘ì— ì¸í„°ëŸ½íŠ¸ê°€ ë°œìƒí•œ ìƒí™©ì—ì„œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ì ‘ê·¼í•  ë•Œ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤.

# Kernel ìˆ˜í–‰ ì¤‘ ì¸í„°ëŸ½íŠ¸ ë°œìƒ ì‹œ
![image](https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/5d8e56fb-2315-4f2b-ba04-e922609c034f)
- ì»¤ë„ì´ Countë¼ëŠ” ë³€ìˆ˜ ê°’ì„ 1 ì¦ê°€ì‹œí‚¤ê³  ìˆì„ ë•Œ, ë³´í†µ ê³ ê¸‰ ì–¸ì–´ë¡œ ëœ ``Count++`` ê°™ì€ ë¬¸ì¥ì€ CPU ë‚´ë¶€ì—ì„œëŠ” ì—¬ëŸ¬ê°œì˜ Instructionì„ í†µí•´ì„œ ì‹¤í–‰í•œë‹¤.
  Countë¼ëŠ” ë©”ëª¨ë¦¬ ë³€ìˆ˜ ê°’ì„ 1 ì¦ê°€ì‹œí‚¨ë‹¤ê³  í•˜ë©´, ë©”ëª¨ë¦¬ì— ìˆëŠ” ë³€ìˆ˜ ê°’ì„ CPU ì•ˆì— ìˆëŠ” ë ˆì§€ìŠ¤í„°ë¡œ ë¶ˆëŸ¬ë“¤ì´ê³ , ê·¸ ë ˆì§€ìŠ¤í„° ê°’ì„ 1 ì¦ê°€ì‹œí‚¨ í›„, ë ˆì§€ìŠ¤í„°ì˜ ê°’ì„ ë‹¤ì‹œ ë©”ëª¨ë¦¬ì˜ ë³€ìˆ˜ ìœ„ì¹˜ì— ê°€ì ¸ë‹¤ì“´ë‹¤.
- ê·¸ëŸ°ë° ì´ ë³€ìˆ˜ë¥¼ CPUë¡œ ì½ì–´ë“¤ì¸ ìƒíƒœì—ì„œ ì¸í„°ëŸ½íŠ¸ê°€ ë“¤ì–´ì™”ì„ ê²½ìš°ì— í•˜ë˜ ì‘ì—…ì„ ì ì‹œ ë©ˆì¶”ê³  ì¸í„°ëŸ½íŠ¸ ì²˜ë¦¬ ë£¨í‹´ìœ¼ë¡œ ë„˜ì–´ê°€ê²Œ ëœë‹¤.
  í•´ë‹¹ ë£¨í‹´ì€ ì»¤ë„ì˜ dataì¸ Count ë³€ìˆ˜ë¥¼ 1ì„ ë¹¼ê³  ì¸í„°ëŸ½íŠ¸ ì²˜ë¦¬ê°€ ë‹¤ ëë‚˜ë©´ ì›ë˜ ìƒíƒœë¡œ ëŒì•„ì˜¨ë‹¤.
- 1ì¦ê°€ì‹œí‚¤ê³  1ê°ì†Œì‹œì¼°ìœ¼ë‹ˆê¹Œ Countë³€ìˆ˜ ê°’ì€ ì›ë˜ì˜ ê°’ê³¼ ë™ì¼í•´ì•¼í•˜ëŠ”ë° ê²°ê³¼ì ìœ¼ë¡œëŠ” 1ì¦ê°€í•œ ê²ƒë§Œ ë°˜ì˜ì´ ëœë‹¤.
-> ì´ë ‡ê²Œ ì¤‘ìš”í•œ ë³€ìˆ˜ ê°’ì„ ê±´ë“œë¦¬ëŠ” ë™ì•ˆì—ëŠ” ì¸í„°ëŸ½íŠ¸ê°€ ë“¤ì–´ì™€ë„ **í•´ë‹¹ ì‘ì—…ì´ ëë‚  ë™ì•ˆ ì¸í„°ëŸ½íŠ¸ ì‹¤í–‰ì„ í•˜ì§€ ì•Šê²Œ í•œë‹¤.**

# Processê°€ system callì„ í•˜ì—¬ kernel modeë¡œ ìˆ˜í–‰ì¤‘ì¸ë° context switchê°€ ì¼ì–´ë‚˜ëŠ” ê²½ìš°
- í”„ë¡œê·¸ë¨ì€ ìœ ì €ëª¨ë“œì™€ ì»¤ë„ëª¨ë“œë¥¼ ë²ˆê°ˆì•„ê°€ë©´ì„œ ì‹¤í–‰ì„ í•˜ëŠ”ë°,
  ì´ ë•Œ CPUê°€ ë…ì ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ í• ë‹¹ ì‹œê°„ì´ ìˆê³  ì •í•´ì§„ í• ë‹¹ ì‹œê°„ì´ ëë‚˜ë©´ CPUë¥¼ ë°˜ë‚©í•˜ê²Œ ëœë‹¤.
![image](https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/b8b0303b-0149-43b3-adb2-062e3edbecbe)
- System Callì„ í†µí•´ ì»¤ë„ì˜ ì½”ë“œê°€ ì‹¤í–‰ì¤‘ì´ê³  ì»¤ë„ì˜ ì½”ë“œê°€ ì‹¤í–‰í•˜ë©´ì„œ ì»¤ë„ì— ìˆëŠ” ë°ì´í„°ì¸ Countë¼ëŠ” ë³€ìˆ˜ë¥¼ ê±´ë“œë ¸ì„ ë•Œì—ëŠ” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
- ìœ„ì˜ ì˜ˆì œì—ì„œ í”„ë¡œì„¸ìŠ¤ Bê°€ Countê°’ì„ ì¦ê°€ì‹œí‚¤ê¸° ì „ì— Countê°’ì„ ì½ì—ˆê³ , CPUë¥¼ ë‹¤ì‹œ ì–»ì—ˆì„ ë•Œì—ëŠ” ê·¸ ì‹œì ì— Contextë¥¼ ê°€ì§€ê³  Countê°’ì„ 1 ì¦ê°€ì‹œí‚¨ í›„ ì €ì¥ì„ í–ˆë‹¤.
- ì´ëŸ¬í•œ ì´ìœ ë¡œ ì¸í•´ í”„ë¡œì„¸ìŠ¤ Aì—ì„œë„ Countë¥¼ 1 ì¦ê°€ì‹œí‚¤ê³  í”„ë¡œì„¸ìŠ¤ Bì—ì„œë„ 1ì¦ê°€ì‹œì¼œ, ì´ 2ê°€ ì¦ê°€ë˜ì–´ì•¼í•˜ëŠ”ë° Bì—ì„œ ì¦ê°€ì‹œí‚¨ ê±´ ë°˜ì˜ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.
-> **ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ê°€ ì»¤ë„ ëª¨ë“œì— ìˆì„ ë•Œì—ëŠ” í• ë‹¹ ì‹œê°„ì´ ëë‚˜ë„ CPU ì œì–´ê¶Œì„ ëºê¸°ì§€ ì•Šë„ë¡ í•œë‹¤.** 
 
# Multiprocessorì—ì„œ shared memoryë‚´ì˜ kernel data
![image](https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/1ee665bc-7b55-4d47-bf34-a05b7c8fdf98)
- 1ë²ˆ CPUì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì„œ ìˆ˜ì •í•  ë•Œ, ì¸í„°ëŸ½íŠ¸ë¥¼ ë§‰ëŠ”ë‹¤ê³  2ë²ˆ CPUê°€ ë°ì´í„°ì— ì ‘ê·¼í•˜ì§€ ëª»í•  ì´ìœ ê°€ ì—†ë‹¤.
- ì´ ê²½ìš°ì—ëŠ” ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ê°€ ê³µìœ  ë°ì´í„°ë¥¼ ê±´ë“œë¦¬ëŠ” ë™ì•ˆì—ëŠ” ì¸í„°ëŸ½íŠ¸ë¥¼ ë§‰ì•„ì„œ í•´ê²°ë˜ëŠ” ë¬¸ì œê°€ ì•„ë‹ˆë‹¤.
- ì´ì „ ì˜ˆì‹œì—ì„œëŠ” CPUê°€ í•˜ë‚˜ì¼ ê²½ìš°, ì‘ì—…í•˜ëŠ” ë„ì¤‘ì— CPU ì œì–´ê¶Œì´ ë„˜ì–´ê°€ì„œ ìƒê¸°ëŠ” ë¬¸ì œì˜€ê³ , ì§€ê¸ˆì˜ ì˜ˆì‹œëŠ” ê·¼ë³¸ì ìœ¼ë¡œ **ì‘ì—… ì£¼ì²´ê°€ ì—¬ëŸ¿**ì´ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ë¬¸ì œë‹¤.
-> í•´ë‹¹ ë°ì´í„°ì— ì ‘ê·¼í•  ë•Œ lockì„ ê±¸ì–´ì•¼ í•œë‹¤. lockì„ ê±¸ì–´ì„œ ë³€ê²½í•˜ê³  ì €ì¥ì´ ëë‚˜ê³  ë‚˜ë©´ unlockì„ í•´ì„œ ë‹¤ë¥¸ cpuê°€ ê·¸ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•œë‹¤.









